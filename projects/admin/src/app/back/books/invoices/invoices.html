<!-- <style>
  /* For Bootstrap 5: force striped effect on tbody rows */
  table.table-striped tbody tr:nth-of-type(odd) {
    background-color: #f8f9fa !important;
  }
  table.table-striped tbody tr:nth-of-type(even) {
    background-color: #fff !important;
  }
</style> -->

<div class="container-fluid container-md">
    <div *ngIf="loaded" class="card mt-2">

        <div class="card-header">
            <div class="d-flex justify-content-between align-items-center">
                <h5>Exercice saison {{season}} : recueil des factures                </h5>
                <h6 class="text-muted"> ({{missing_invoices_number}} entrées sans référence sur un total de  {{book_entries.length}})</h6>
            </div>
        </div>

        <div class="card-body">
            <table class="table table-sm table-bordered table-responsive table-striped  ">
                <thead>
                    <tr>
                        <th class="col ">date </th>
                        <th class="col">transaction</th>
                        <th class="col  text-end pe-5"> montant</th>
                        <th class="col">document</th>
                        <th class="col ms-3 text-start"> tag </th>
                    </tr>
                </thead>
                <tbody>
                <tr class="align-items-center" *ngFor="let entry of book_entries; let i = index">
                    <td> {{ entry.date | date:'dd/MM/yyyy' }} </td>
                    <td>{{entry.transaction_id}}</td>
                    <td class="text-end pe-5"> {{sum_amounts(entry.amounts) | number: truncature:'fr'}} </td>
                    <td >
                        <!-- <div class="d-flex flex-row align-items-center gap-2"> -->
                            <ng-container *ngIf="entry.invoice_ref; else uploadIcon">
                                <span class="me-3" style="cursor:pointer" (click)="download_pdf(entry.invoice_ref)">
                                    <i class="bi-file-earmark-arrow-down-fill text-info fs-5"></i>
                                    <span class="ms-1">consulter</span>
                                </span>
                                <span class="me-3" style="cursor:pointer" (click)="remove_pdf(entry)">
                                    <i class="bi-file-earmark-x-fill text-danger fs-5"></i>
                                    <span class="ms-1">supprimer</span>
                                </span>
                            </ng-container>
                            <ng-template #uploadIcon>
                                <span class="me-3" style="cursor:pointer" (click)="add_invoice_ref(entry)">
                                    <i class="bi bi-file-earmark-plus-fill text-success fs-5"></i>
                                    <span class="ms-1">ajouter</span>
                                </span>
                            </ng-template>
                        <!-- </div> -->
                    </td>
                    <td class="text-start ms-3"> {{entry.tag}} </td>
                </tr>
            </tbody>

            </table>
        </div>

    </div>