/* Sandbox mode switch styling */
.sandbox-switch {
  .form-check-input {
	width: 2.5rem;
	height: 1.3rem;
	cursor: pointer;
	background-color: #ddd;
	border: 1px solid #bbb;
	transition: background-color .25s ease, box-shadow .25s ease;
  }
  .form-check-input:checked {
	background-color: #198754;
	border-color: #198754;
	box-shadow: 0 0 0 0.15rem rgba(25,135,84,0.35);
  }
  .form-check-label { margin-left: .5rem; font-weight: 500; }
  .state { margin-left: .4rem; font-size: .75rem; font-weight: 600; opacity: .65; transition: color .2s ease, opacity .2s ease; }
  .state.on { color: #198754; opacity: 1; }
}

/* Drag & Drop visual helpers */
.dropdown-menu[cdkDropList] {
  min-width: 14rem;
  padding: .25rem 0;
  display: flex;
  flex-direction: column; /* ensure vertical stacking for CDK's vertical orientation */
}

.dropdown-item.cdk-drag-preview { box-shadow: 0 .5rem 1rem rgba(0,0,0,.15); background: #fff; border: 1px solid #e1e1e1; }
.dropdown-item.cdk-drag-animating { transition: transform 200ms ease; }
.dropdown-menu[cdkDropList] .dropdown-item + .dropdown-item { border-top: 1px dashed #f1f1f1; }

i.bi-grip-vertical { cursor: grab; }
i.bi-grip-vertical:active { cursor: grabbing; }

.drag-handle { display: inline-flex; align-items: center; user-select: none; }

/* Generic placeholder hidden by default; specific containers override opacity and sizing */
.cdk-drag-placeholder { opacity: 0; }

/* Parent navbar placeholder: thin vertical indicator at drop position */
.navbar-nav[cdkDropList] .cdk-drag-placeholder {
  opacity: 1; width: 6px; min-width: 6px; height: 1.5rem; align-self: center;
  background: rgba(13,110,253,.4); border-radius: 3px;
}

/* Child dropdown placeholder: thin horizontal spacer */
.dropdown-menu[cdkDropList] .cdk-drag-placeholder {
  /* Make placeholder larger so it's easier to hit between items */
  opacity: 1; height: 12px; margin: 6px 8px; background: rgba(25,135,84,.35); border-radius: 4px;
}

/* Add spacing/padding between child items so there's room to drop between them */
.dropdown-menu[cdkDropList] > li { padding: .25rem .5rem; }
.dropdown-menu[cdkDropList] > li + li { margin-top: .25rem; }

/* Some templates used .dropdown-item; ensure border separators still apply */
.dropdown-menu[cdkDropList] .dropdown-item + .dropdown-item,
.dropdown-menu[cdkDropList] li + li { border-top: 1px dashed #f1f1f1; }

/* Ensure the navbar drop-list only covers the actual menu items */
.nav-drop-list { display: flex; flex-wrap: nowrap; align-items: center; gap: 0.5rem; padding-left: 0; justify-content: flex-start; }
.nav-drop-list > li { display: flex; align-items: center; white-space: nowrap; }

/* Ensure the navbar collapse container is positioned so CDK boundary calculations work */
#navbarNav { position: relative; overflow: visible; }

/* Consolidated preview rules: non-interactive, constrained size and placed above content */
.cdk-drag-preview {
  pointer-events: none;
  /* Let CDK position the preview (do not force fixed offsets) */
  margin: 0 !important;
  max-width: 320px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  transform-origin: left center !important;
  box-shadow: 0 .5rem 1rem rgba(0,0,0,.15);
  background: #fff;
  border: 1px solid #e1e1e1;
  border-radius: .25rem;
  z-index: 2000;
  will-change: transform;
}

/* Note: temporary debug-hide removed so CDK preview is visible.
  Previews remain non-interactive due to the consolidated `.cdk-drag-preview` rules above. */

/* Ensure dropdown menus are hidden by default inside the menus editor until explicitly opened */
.menus-editor-root .dropdown .dropdown-menu { display: none !important; }
.menus-editor-root .dropdown.show > .dropdown-menu { display: block !important; }
.menus-editor-root .dropdown-toggle[aria-expanded="true"] { /* defensive: don't rely on attribute alone */ }
